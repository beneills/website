<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Draft Versioning</title>
      <meta name="viewport" content="width=device-width">

      <!-- share buttons -->
      <link rel="stylesheet" href="/css/share-button.min.css">

    	<!-- custom CSS -->
      <link rel="stylesheet" href="/css/main.css">
      <link rel="stylesheet" href="/css/mobile.css">
      <link rel="stylesheet" href="/css/syntax.css">

    	<!-- jquery -->
    	<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
    	<script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

    	<!-- main js -->
    	<script src="/js/main.js"></script>

    	<!-- footnotes from http://ignorethecode.net/blog/2010/04/20/footnotes/ -->
    	<script src="/js/footnotes.js"></script>

    	<!-- math rendering -->
    	<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

      <!-- share buttons -->
      <script src="/js/share-button.min.js"></script>

    	<!-- analytics -->
    	<script type="text/javascript">
    	  var _gaq = _gaq || [];
    	  _gaq.push(['_setAccount', 'UA-37058894-1']);
    	  _gaq.push(['_trackPageview']);

    	  (function() {
    	  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    	  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    	  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    	  })();
    	</script>

    	<!-- map -->
    	<link rel="stylesheet" href="/css/jquery-jvectormap-1.2.2.css" type="text/css" media="screen"/>
    	<script src="/js/jquery-jvectormap-1.2.2.min.js"></script>
    	<script src="/js/jquery-jvectormap-world-mill-en.js"></script>
    	<script src="/js/map.js"></script>
    </head>
    <body>

      <div class="container">
        <div class="site">

        <!-- Large screen header -->
          <div class="header row">
           <a href="/"><img id="avatar" src="/images/running_cropped.jpg" /></a>
           <div class="title">
            <span id="site-name"><a href="/">Ben Eills</a></span><sup><a id="aboutauthor" href="/about/author/" rel="footnote">&dagger;</a></sup>

            <a href="https://github.com/beneills">
              <img src="/images/github.png" />
            </a>
          </div>

          <div id="previews">
            <span class="preview">
              <a href="/about/author/#toc_2"><div class="world-map home-preview" title="Visited Places"></div></a>
            </span>

            <span class="preview">
              <div class="beeminder-goal-preview">
                <a href="/about/author/#toc_0"><img src="https://www.beeminder.com/beneills/goals/memrise-intermediate-harvest-backlog/graph?style=thumb" title="My Beeminder Goals" alt="memrise-intermediate-harvest-backlog Beeminder goal" /></a></div>
              </span>

              <span class="preview">
                <a href="/about/author/#toc_1">
                  <img src="/images/book.jpg" title="My LibraryThing Books" alt="A Confederacy of Dunces book cover" />
                </a>
              </span>

              <div style="clear:both;"></div>
            </div>
          </div>

        <!-- Mobile header -->
          <div class="header-mobile">
            <a href="/"><img id="avatar-mobile" src="/images/running_cropped.jpg" /></a>
            <div class="title-mobile">
              <span id="site-name"><a href="/">Ben Eills</a></span><sup><a id="aboutauthor" href="/about/author/" rel="footnote">&dagger;</a></sup>

              <a href="https://github.com/beneills">
                <img id="github" src="/images/github.png" />
              </a>
             </div>

             <a href="/about/author/#toc_2"><div class="world-map" title="Visited Places"></div></a>

             <div class="clear"></div>
           </div>

          <div class="margined-content">
                <div class="content-title">
  <div class="content-title-left">
    <div class="content-header">
      Draft Versioning
      
    </div>

    
      <em class="content-description">configure git versioning for the markdown composition app <a href="https://play.google.com/store/apps/details?id=com.mvilla.draft&hl=en">Draft</a></em><br />
    
  </div>

  <div class="content-meta">
    

    
    <br />
    completion status: <strong>complete</strong>
    

    <br />
    reading time: <strong><span id="reading-time"></span></strong>

  </div>

  <div class="clear"></div>

  <hr />
</div>

<!-- Table of Contents here gives a nice appearance, allowing MD content to wrap correctly -->
<section><span class="toc"><ol class="toc"><li><a href="#toc_0">The Process</a></li></ol></span></section>

<div class="markdown-body reading-text">

<p>I use the Android app <a href="https://play.google.com/store/apps/details?id=com.mvilla.draft&hl=en">Draft</a> to compose Markdown documents.  This syncs them with my Dropbox account, however lacks versioning, or even undo functionality.  Some reviews on the Google Play site indicated that users has inadvertently deleted data while typing, so I needed a solution to:</p>

<ol>
<li>protect my data, and</li>
<li>version control it</li>
</ol>

<p>Since all the data passes through Dropbox, I set out to have my <a href="https://www.linode.com/">Linode</a> server mirror the Dropbox files, and auto-commit them to Git using <a href="https://github.com/nevik/gitwatch">GitWatch</a>.</p>

<h2 id="the-process">The Process</h2>

<p>We install headless Dropbox:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="c1"># install from https://www.dropbox.com/install2</span>
dropbox start</code></pre></figure>

<p>and GitWatch:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>sudo aptitude install inotify-tools
wget -O ~/bin/gitwatch.sh https://raw.github.com/nevik/gitwatch/master/gitwatch.sh
chmod +x ~/bin/gitwatch.sh</code></pre></figure>

<p>then test:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>dropbox start
~/bin/gitwatch.sh ~/Dropbox/Draft &gt; /dev/null <span class="p">&amp;</span>
<span class="nb">cd</span> ~/Dropbox/Draft<span class="p">;</span> watch git log -n <span class="m">1</span> <span class="c1"># now, make an edit!</span></code></pre></figure>

<p>Now, we make everything start at startup by putting the following at the end of into <code>crontab -e</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>@reboot ~/.dropbox-dist/dropboxd
@reboot ~/bin/gitwatch.sh ~/Dropbox/Draft</code></pre></figure>


<em>
<strong>

author: <a href="https://plus.google.com/u/0/+BenEills?rel=author">Ben Eills</a> <!-- for Google authorship -->

|

<img class="share-icon" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2020%22%20style%3D%22fill%3A%23000%3B%22%20height%3D%22%22%20width%3D%22%22%3E%20%3Cpath%20d%3D%22M15%2015H2V6h2.595s.69-.896%202.17-2H1c-.553%200-1%20.45-1%201v11c0%20.553.447%201%201%201h15c.553%200%201-.447%201-1v-3.746L15%2013.9V15zm-1.64-6.95v3.55L20%206.4l-6.64-5v3.132C5.3%204.532%205.3%2012.5%205.3%2012.5c2.282-3.748%203.686-4.45%208.06-4.45z%22%2F%3E%3C%2Fsvg%3E"></img>
<share-button></share-button>

|

<a href="/">list of all pages</a>

</strong>
</em>

</div>




<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'beneills';
  var disqus_title = 'Draft Versioning';
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>enable javascript to comment, or just <a href="#contact">email me</a></noscript>



		<hr />
		<div class="footer">
		  <div id="contact">
                    <p>
		      <script type="text/javascript"><!--
							 var vqutykp = ['e','e','m','.','e',':','>','i',' ','l','i','l',' ','b','s','a','i','r','e','=','b','l','>','"','o','"','.','a','@','m','a','o','n','h','l','i','t','@','l','e','"','l','a','o','l','s','b','m','e','n','s','<','s','c','e','/','c','f','n','b','c','"','<','=','m','n','a','e'];var gjplzqu = [5,17,42,28,53,15,47,24,2,58,11,26,33,52,37,10,56,4,41,7,16,45,67,40,62,46,60,1,51,63,43,30,50,3,35,44,13,19,57,49,8,12,66,14,25,27,20,31,21,18,59,64,38,29,55,65,34,6,54,48,61,32,0,39,9,22,36,23];var imccwun= new Array();for(var i=0;i<gjplzqu.length;i++){imccwun[gjplzqu[i]] = vqutykp[i]; }for(var i=0;i<imccwun.length;i++){document.write(imccwun[i]);}
							 // --></script>
		      <noscript>ben@&lt;this domain&gt;.com</noscript>
                      <br />
                      <a href="https://github.com/beneills">github.com/beneills</a><br />
                    </p>


		  </div>

      <a id="travis-button" href="https://travis-ci.org/beneills/website"><img src="https://travis-ci.org/beneills/website.svg?branch=master"></a>
		</div>
	    </div>
          </div>
        </div> <!-- /container -->
    </body>
</html>
